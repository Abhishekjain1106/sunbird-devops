number_of_milliseconds_in_minute = 60 * 1000
max_number_of_allowed_milliseconds = {{ expected_data_backup_interval_in_minutes }} * number_of_milliseconds_in_minute

ALERT stale_backup
  IF absent(azure_blob_latest_file_timestamp{job="data-backup-azure-blob-exporter"}) OR (time() * 1000) - azure_blob_latest_file_timestamp{job="data-backup-azure-blob-exporter"} > max_number_of_allowed_milliseconds
  FOR 5m
  ANNOTATIONS {
      summary = "Backup is stale",
      description = "{% raw %}{{ $labels.container }}{% endraw %}: Latest backup file was created {% raw %}{{ $value / (60 * 1000) }}{% endraw %} minutes ago. Threshold: {{ expected_data_backup_interval_in_minutes }} minutes",
  }