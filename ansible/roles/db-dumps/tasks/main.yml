# - name: Clean artifact path
#   file:
#     state: absent
#     path: "{{ cql_output_root_dir }}"

# - name: Clean artifact path
#   file:
#     state: absent
#     path: "{{ csv_output_root_dir }}"

# - name: Ensure CQL directory exists
#   file:
#     path: "{{ cql_output_root_dir }}"
#     state: directory

# - name: Ensure CSV directory exists
#   file:
#     path: "{{ csv_output_root_dir }}"
#     state: directory

# - name: Save CQL
#   template: src="{{ item }}.cql" dest="/tmp/cql/{{ item }}.cql"
#   with_items: "{{ cqls }}"

# - shell: 'cqlsh --debug -f /tmp/cql/{{ item }}.cql'
#   with_items: "{{ cqls }}"


- name: Fetch stuff from the remote and save to local
  synchronize:  src=/tmp/cql/csv/sunbird_orgs.csv dest=./sunbird-devops/ mode=pull rsync_path=/usr/bin/rsync
  
# - name: get the csv reports
#   become: yes 
#   synchronize: mode=pull src="{{ csv_output_root_dir }}/{{ item }}.csv" dest=./
#   with_items: "{{ cqls }}"

# - name: 'Test | synchronize'
#   synchronize: src="{{ csv_output_root_dir }}/{{ item }}.csv"  dest=./ mode=pull recursive=yes  rsync_path="sudo rsync"
#   with_items: "{{ cqls }}"

# - fetch:
#     src: "{{ csv_output_root_dir }}/{{ item }}.csv"
#     dest: ./
#     fail_on_missing: yes
#     flat: yes
 #  with_items: "{{ cqls }}"